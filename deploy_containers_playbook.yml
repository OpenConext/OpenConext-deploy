---
- name: Deploy containerized applications
  hosts: docker_servers
  become: true
  tasks:
    - name: Read vars from secrets file
      ansible.builtin.include_vars: "{{ inventory_dir }}/secrets/secrets.yml"
      no_log: true
      tags:
        - always

# Separate grouos for all containerized apps
# Dividing apps across the container services should be set in
# the inventory not in the playbook, this way you can easily change
# it for different environments
- name: Deploy invite app
  hosts: docker_invite
  become: true
  roles:
    - { role: invite, tags: ['invite'] }

- name: Deploy dashboard app
  hosts: docker_dashboard
  become: true
  roles:
    - { role: dashboard, tags: ['dashboard'] }

