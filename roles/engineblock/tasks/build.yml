- name: Download Composer 
  get_url:
    url: https://getcomposer.org/download/latest-1.x/composer.phar
    dest: "{{ composer_path }}"
    mode: 0755

- name: Remove Nodesource repositories for Node.js
  yum:
    name: "nodesource-release"
    state: removed

- name: Add Nodesource repositories for Node.js
  yum:
    name: "https://rpm.nodesource.com/pub_12.x/el/{{ ansible_distribution_major_version }}/{{ ansible_architecture }}/nodesource-release-el{{ ansible_distribution_major_version }}-1.noarch.rpm"
    state: present

- name: Ensure Node.js and npm are installed
  yum:
    name: "nodejs-12*"
    state: present
    enablerepo: nodesource
